import os
import random
import sqlite3
from datetime import datetime
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    ContextTypes,
    MessageHandler,
    filters
)

# โโโ CONFIG โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TOKEN = os.getenv("TOKEN", "").strip()
if not TOKEN:
    raise ValueError("TOKEN ะฝะต ะฝะฐะนะดะตะฝ")

ADMIN_CHAT_ID = 712908007
PHOTOS_DIR = "photos"
DB_NAME = "stats.db"

# โโโ PHOTOS โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
all_photos = [f for f in os.listdir(PHOTOS_DIR) if f.endswith(".jpg")]
if not all_photos:
    raise ValueError("ะะตั jpg ะฒ photos")
photo_queue = []

def get_next_photo():
    global photo_queue
    if not photo_queue:
        photo_queue = all_photos.copy()
        random.shuffle(photo_queue)
    return photo_queue.pop()

# โโโ PHRASES (ะพััะฐะฒะธะป ัะพะปัะบะพ ะฝะฐัะฐะปะพ, ะฒััะฐะฒั ะฒัะต) โโโ
PHRASES = [
    "ะะตะฝะพัะบะฐ, ัั ะฝะตะฒะตัะพััะฝะฐั, ะฝะต ะทะฐะฑัะฒะฐะน ะพะฑ ััะพะผ ๐ธ",
    "ะััะธ ะณะปัะฑะพะบะพ, ะฒัั ะฝะฐะปะฐะดะธััั, ั ะฒะตัั ะฒ ัะตะฑั โค๏ธ",
    "ะขั ัะธะปัะฝะฐั, ัะผะตะปะฐั ะธ ะทะฐะผะตัะฐัะตะปัะฝะฐั, ะะตะฝะพัะบะฐ ๐",
    "ะะต ะฟะตัะตะถะธะฒะฐะน ัะปะธัะบะพะผ ัะธะปัะฝะพ, ะผะธั ะปัะฑะธั ัะตะฑั ๐ผ",
    "ะะฐะถะดัะน ะดะตะฝั โ ะฝะพะฒะฐั ะฒะพะทะผะพะถะฝะพััั, ะะตะฝะพัะบะฐ โจ",
    "ะขั ะทะฐัะปัะถะธะฒะฐะตัั ััะฐัััั ะธ ัะตะฟะปะฐ, ะฝะต ะทะฐะฑัะฒะฐะน ๐ท",
    "ะะตะฝะพัะบะฐ, ะฟะพะผะฝะธ, ััะพ ัะฒะพะธ ััะฒััะฒะฐ ะฒะฐะถะฝั ะธ ะธั ะผะพะถะฝะพ ะพัะฟัััะธัั ๐",
    "ะขั ะผะพะถะตัั ะฒัั, ััะพ ะทะฐะดัะผะฐะปะฐ, ะฟัะพััะพ ะฟะพะฒะตัั ะฒ ัะตะฑั ๐ซ",
    "ะกะผะตะนัั, ะดะฐะถะต ะตัะปะธ ัะตะณะพะดะฝั ัััะดะฝะพ, ะะตะฝะพัะบะฐ ๐บ",
    "ะขั ะดะตะปะฐะตัั ะผะธั ัััะต, ะฟัะพััะพ ะฑัะดั ัะพะฑะพะน ๐",
    "ะะตะฝะพัะบะฐ, ะฒัั, ััะพ ัะตะฑั ััะตะฒะพะถะธั, ะฟัะพะนะดัั ๐๏ธ",
    "ะะต ัะฟะตัะธ, ะดััะธ ะธ ะดะตะปะฐะน ะผะฐะปะตะฝัะบะธะต ัะฐะณะธ ๐ธ",
    "ะขั ัะถะต ะฟัะพะดะตะปะฐะปะฐ ะพะณัะพะผะฝัั ัะฐะฑะพัั, ะะตะฝะพัะบะฐ ๐",
    "ะัะฑะพะน ััะพัะผ ะทะฐะบะฐะฝัะธะฒะฐะตััั, ะธ ัะพะปะฝัะต ะพะฑัะทะฐัะตะปัะฝะพ ะฒัะนะดะตั โ๏ธ",
    "ะะตะฝะพัะบะฐ, ะทะฝะฐะน: ัะฒะพั ะดะพะฑัะพัะฐ ะดะตะปะฐะตั ััะพั ะผะธั ะปัััะต ๐",
    "ะขั ัะผะตะตัั ัะฟัะฐะฒะปััััั ั ัััะดะฝะพัััะผะธ, ะดะฐะถะต ะตัะปะธ ัะตะนัะฐั ััะถะตะปะพ ๐ท",
    "ะะพะทะฒะพะปั ัะตะฑะต ะพัะดะพัะฝััั ะธ ัะปัะฑะฝััััั ๐",
    "ะะตะฝะพัะบะฐ, ัั ะทะฐัะปัะถะธะฒะฐะตัั ะปัะฑะฒะธ ะธ ะทะฐะฑะพัั ๐น",
    "ะะฐะถะดะพะต ัะฒะพะต ััะฒััะฒะพ ะฒะฐะถะฝะพ, ะฝะต ะฟะพะดะฐะฒะปัะน ะตะณะพ ๐",
    "ะขั ะฝะต ะพะดะฝะฐ, ะผะธั ะธ ั ั ัะพะฑะพะน ๐",
    "ะะตะฝะพัะบะฐ, ัะตะณะพะดะฝั ัะพัะพัะธะน ะดะตะฝั ะดะปั ะผะฐะปะตะฝัะบะพะน ัะฐะดะพััะธ ๐",
    "ะขั ัะฐะปะฐะฝัะปะธะฒะฐ, ัะผะฝะฐ ะธ ะฟัะตะบัะฐัะฝะฐ ๐",
    "ะะต ะฑะพะนัั ะพัะธะฑะพะบ, ะพะฝะธ ะดะตะปะฐัั ัะตะฑั ัะธะปัะฝะตะต ๐ซ",
    "ะะตะฝะพัะบะฐ, ัะปัะฑะฝะธัั, ะดะฐะถะต ะผะฐะปะตะฝัะบะฐั ัะปัะฑะบะฐ โ ััะพ ะผะฐะณะธั ๐บ",
    "ะขั ัะฟะพัะพะฑะฝะฐ ะฝะฐ ะฑะพะปััะตะต, ัะตะผ ะดัะผะฐะตัั ๐ผ",
    "ะัั ะฑัะดะตั ัะพัะพัะพ, ะฟัะพััะพ ะดะพะฒะตััะน ัะตะฑะต ๐ท",
    "ะะตะฝะพัะบะฐ, ัั ัะดะธะฒะธัะตะปัะฝะฐั, ะฝะต ัะพะผะฝะตะฒะฐะนัั ๐ธ",
    "ะัััั ัะตะณะพะดะฝั ะฑัะดะตั ะผะธะฝััะบะฐ ะฟะพะบะพั ะธ ัะตะฟะปะฐ ๐",
    "ะขั ัะผะตะตัั ัะฟัะฐะฒะปััััั ั ะปัะฑัะผะธ ะฑัััะผะธ, ะะตะฝะพัะบะฐ ๐๏ธ",
    "ะะพะผะฝะธ, ััะพ ะผะฐะปะตะฝัะบะธะต ะฟะพะฑะตะดั โ ััะพ ัะพะถะต ััะฟะตั ๐",
    "ะะตะฝะพัะบะฐ, ะฟะพะทะฒะพะปั ัะตะฑะต ะฟะพััะฒััะฒะพะฒะฐัั ัะฐะดะพััั ัะตะณะพะดะฝั ๐",
    "ะขั ะดะพััะพะนะฝะฐ ัะฐะผัั ััะฟะปัั ัะปะพะฒ ะธ ะพะฑัััะธะน ๐",
    "ะะฐะถะต ะฒ ัััะดะฝัะต ะผะพะผะตะฝัั ัั ะพััะฐััััั ะฟัะตะบัะฐัะฝะพะน ๐ท",
    "ะะตะฝะพัะบะฐ, ัะฒะพั ัะฝะตัะณะธั ะดะตะปะฐะตั ััะพั ะผะธั ัะฒะตัะปะตะต โจ",
    "ะะพะฒะตััะน ัะตะฑะต, ัั ะฒัั ัะผะพะถะตัั ๐ซ",
    "ะขั ัะถะต ะผะฝะพะณะพ ะฟัะพัะปะฐ, ะณะพัะดะธัั ัะพะฑะพะน ๐น",
    "ะะตะฝะพัะบะฐ, ะธะฝะพะณะดะฐ ะพัะดัั โ ััะพ ะปัััะธะน ัะฟะพัะพะฑ ะฑััั ัะธะปัะฝะพะน ๐ผ",
    "ะขั ะฟัะตะบัะฐัะฝะฐ ัะฐะบะพะน, ะบะฐะบะฐั ะตััั ๐บ",
    "ะัััั ัะตะณะพะดะฝั ะฑัะดะตั ะผะฐะปะตะฝัะบะพะต ััะดะพ ะดะปั ัะตะฑั ๐",
    "ะะตะฝะพัะบะฐ, ัะฒะพั ัะปัะฑะบะฐ โ ััะพ ัะพะปะฝัะต ะดะปั ะดััะณะธั ๐ธ",
    "ะขั ัะฟะพัะพะฑะฝะฐ ะฝะฐ ะฝะตะฒะตัะพััะฝะพะต, ะฟะพะฒะตัั ๐",
    "ะะฐะถะต ะตัะปะธ ััะถะตะปะพ, ะบะฐะถะดัะน ัะฐะณ โ ััะพ ะฟัะพะณัะตัั ๐ท",
    "ะะตะฝะพัะบะฐ, ะฑัะดั ะผัะณะบะพะน ะบ ัะตะฑะต, ัั ะทะฐัะปัะถะธะฒะฐะตัั ะทะฐะฑะพัั ๐๏ธ",
    "ะขั ัะฝะธะบะฐะปัะฝะฐ, ะฟะพะผะฝะธ ะพะฑ ััะพะผ โจ",
    "ะะตะฝะพัะบะฐ, ะบะฐะถะดัะน ัะฒะพะน ะดะตะฝั โ ััะพ ะผะฐะปะตะฝัะบะฐั ะฟะพะฑะตะดะฐ ๐",
    "ะขั ัะฒะตัะธัั ะดะฐะถะต ะฒ ัะฐะผัะต ะฟะฐัะผััะฝัะต ะดะฝะธ ๐",
    "ะะตะฝะพัะบะฐ, ัั ัะฟัะฐะฒะธัััั ั ััะธะผ, ั ะทะฝะฐั ๐บ",
    "ะัััั ะปัะฑะพะฒั ะบ ัะตะฑะต ััะฐะฝะตั ัะฒะพะตะน ัะธะปะพะน ๐ธ",
    "ะขั ะฟัะตะบัะฐัะฝะฐ, ะดะฐะถะต ะบะพะณะดะฐ ัะพะผะฝะตะฒะฐะตัััั ๐",
    "ะะตะฝะพัะบะฐ, ะดะพะฒะตััะน ัะฒะพะธะผ ะพัััะตะฝะธัะผ ะธ ััะฒััะฒะฐะผ ๐ท",
    "ะะฐะถะดะพะต ัััะพ โ ัะฐะฝั ะฝะฐัะฐัั ั ัะธััะพะณะพ ะปะธััะฐ ๐",
    "ะขั ัะฐะผะพะต ััะฟะปะพะต, ััะพ ะตััั ะฒ ะผะพัะผ ะดะฝะต ๐๐",
    "ะก ัะพะฑะพะน ะดะฐะถะต ะพะฑััะฝัะต ะผะพะผะตะฝัั ััะฐะฝะพะฒัััั ะพัะพะฑะตะฝะฝัะผะธ ๐ธโจ",
    "ะะธั ั ัะพะฑะพะน ะพัััะฐะตััั ะดะพะฑัะตะต ๐๐",
    "ะขั ะดะตะปะฐะตัั ะผะพั ะถะธะทะฝั ัะฒะตัะปะตะต โ๏ธ๐ท",
    "ะฃะปัะฑะบะฐ โ ััะพ ัะฒะพั ััะฟะตััะธะปะฐ ๐บ๐ซ",
    "ะกะฟะฐัะธะฑะพ, ััะพ ัั ะตััั ๐๐",
    "ะก ัะพะฑะพะน ัะพัะตััั ะฑััั ะปัััะต ๐๐",
    "ะขั ะผะพะน ััั ๐๏ธ๐ฟ",
    "ะะฐะถะดัะน ะดะตะฝั ั ัะพะฑะพะน ััะพ ะผะฐะปะตะฝัะบะพะต ััะฐัััะต ๐๐",
    "ะขั ะฒะดะพัะฝะพะฒะปัะตัั ะฟัะพััะพ ัะตะผ, ััะพ ััะดะพะผ ๐ท๐ซ",
    "ะะฝะต ะฝัะฐะฒะธััั, ััะพ ัั ะตััั ะฒ ััะพะผ ะผะธัะต ๐ผ๐",
    "ะก ัะพะฑะพะน ะฒัั ะพัััะฐะตััั ะฟัะฐะฒะธะปัะฝัะผ ๐๐ธ",
    "ะขั ะผะพั ะปัะฑะพะฒั โค๏ธ๐",
    "ะขะฒะพั ะฝะตะถะฝะพััั ะฑะตััะตะฝะฝะฐ ๐๐๏ธ",
    "ะขั ัะผะตะตัั ะดะตะปะฐัั ะดะตะฝั ัะตะฟะปะตะต โ๏ธ๐น",
    "ะฏ ะฑะปะฐะณะพะดะฐัะตะฝ ััะดัะฑะต ะทะฐ ัะตะฑั ๐๐",
    "ะก ัะพะฑะพะน ะปะตะณะบะพ ะธ ัะฟะพะบะพะนะฝะพ ๐ฟ๐ธ",
    "ะขั ะผะพั ัะฐะดะพััั ๐บโจ",
    "ะะฐะถะต ะบะพัะธะบะธ ะทะฐะฒะธะดััั ัะฒะพะตะน ะผะธะปะพัะต ๐ฑ๐",
    "ะขั ัะบัะฐัะฐะตัั ััะพั ะดะตะฝั ๐ธ๐",
    "ะะฝะต ะฝัะฐะฒะธััั ะดัะผะฐัั ะพ ัะตะฑะต ๐๐ซ",
    "ะขั ะปัััะตะต, ััะพ ัะพ ะผะฝะพะน ัะปััะฐะปะพัั ๐ทโค๏ธ",
    "ะก ัะพะฑะพะน ัะพัะตััั ะดะตะปะธัััั ะฒัะตะผ ๐๐",
    "ะขั ะดะตะปะฐะตัั ะผะธั ะผัะณัะต ๐ผ๐๏ธ",
    "ะขั ะผะพั ััะฐัััะต โ๏ธ๐",
    "ะกะฟะฐัะธะฑะพ ะทะฐ ัะฒะพั ะดะพะฑัะพัั ๐ธ๐",
    "ะก ัะพะฑะพะน ะฒัะตะณะดะฐ ัะตะฟะปะพ ๐๐",
    "ะขั ะพัะฒััะฐะตัั ััะพั ะดะตะฝั ๐๐ท",
    "ะขั ะดะตะปะฐะตัั ะผะตะฝั ััะฐััะปะธะฒัะผ ๐บ๐ซ",
    "ะะฝะต ะฟะพะฒะตะทะปะพ, ััะพ ัั ััะดะพะผ ๐โค๏ธ",
    "ะขั ะบะฐะบ ะปััะธะบ ัะฒะตัะฐ โ๏ธ๐",
    "ะก ัะพะฑะพะน ะดะฐะถะต ัะธัะธะฝะฐ ะฟัะธััะฝะฐั ๐ฟโจ",
    "ะขั ะผะพั ะทะฐะนะบะฐ ๐๐",
    "ะฏ ัะปัะฑะฐััั, ะบะพะณะดะฐ ะดัะผะฐั ะพ ัะตะฑะต ๐บ๐",
    "ะขั ะผะพั ะฒะดะพัะฝะพะฒะตะฝะธะต ๐ท๐ซ",
    "ะฃะปัะฑะฝะธัั! ๐๐ธ",
    "ะะฝะต ัะพัะพัะพ, ะบะพะณะดะฐ ัั ััะดะพะผ ๐๏ธโค๏ธ",
    "ะขั ะผะพะน ะผะฐะปะตะฝัะบะธะน ะฟัะฐะทะดะฝะธะบ ๐๐",
    "ะขั ะปัััะต ะฒัะตั ๐๐บ",
    "ะะต ะพะฟะธัะฐัั ัะปะพะฒะฐะผะธ ะผะพั ะปัะฑะพะฒั ะบ ัะตะฑะต ๐๐",
    "ะกะฟะฐัะธะฑะพ ๐๐ธ",
    "ะขั ะผะพั ะฝะตะถะฝะพััั ๐ท๐",
    "ะฏ ะทะฝะฐั, ััะพ ัั ััะฐัะฐะตัััั ๐ซ๐",
    "ะขั ะผะพั ัะฐะดะพััั ะบะฐะถะดัะน ะดะตะฝั ๐บ๐ผ",
    "ะก ัะพะฑะพะน ัะพัะตััั ัะปัะฑะฐัััั ๐๐"
]

# โโโ ะะะะะะะขะฃะะ (ัะตะฟะตัั 3 ะบะฝะพะฟะบะธ ะฒ ะดะฒัั ัััะพะบะฐั) โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
keyboard = [
    ["ะะพัะธะฒะธััััะฐั ััะฐะทะฐ ๐ธ", "ะะธะปะฐั ัะพัะบะฐ ๐ถ"],
    ["ะฏ ะถะตะปะฐัโฆ ๐ญ"]
]
reply_markup = ReplyKeyboardMarkup(
    keyboard,
    resize_keyboard=True,
    one_time_keyboard=False,   # ััะพะฑั ะบะปะฐะฒะธะฐัััะฐ ะฝะต ะฟัััะฐะปะฐัั ะฟะพัะปะต ะฝะฐะถะฐัะธั
    input_field_placeholder="ะะฐะถะผะธ ะบะฝะพะฟะบั ะฝะธะถะต ๐"
)

# โโโ DATABASE โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
def db_conn():
    return sqlite3.connect(DB_NAME)

def log_action(user, action):
    conn = db_conn()
    cur = conn.cursor()
    cur.execute("CREATE TABLE IF NOT EXISTS users (user_id INTEGER PRIMARY KEY, username TEXT, first_name TEXT, first_seen TEXT, last_seen TEXT)")
    cur.execute("CREATE TABLE IF NOT EXISTS actions (id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, action TEXT, timestamp TEXT)")
    now = datetime.now().isoformat()
    cur.execute("""
        INSERT INTO users (user_id, username, first_name, first_seen, last_seen)
        VALUES (?, ?, ?, ?, ?)
        ON CONFLICT(user_id) DO UPDATE SET last_seen=?, username=?, first_name=?
    """, (user.id, user.username, user.first_name, now, now, now, user.username, user.first_name))
    cur.execute("INSERT INTO actions (user_id, action, timestamp) VALUES (?, ?, ?)", (user.id, action, now))
    conn.commit()
    conn.close()

def save_wish(user, wish_text):
    conn = db_conn()
    cur = conn.cursor()
    cur.execute("CREATE TABLE IF NOT EXISTS wishes (id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, wish TEXT, timestamp TEXT)")
    cur.execute("INSERT INTO wishes (user_id, wish, timestamp) VALUES (?, ?, ?)",
                (user.id, wish_text, datetime.now().isoformat()))
    conn.commit()
    conn.close()

def get_all_wishes():
    conn = db_conn()
    cur = conn.cursor()
    cur.execute("SELECT user_id, wish, timestamp FROM wishes ORDER BY timestamp ASC")
    rows = cur.fetchall()
    conn.close()
    return rows

# โโโ NOTIFY โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
async def notify_admin(context, user, action):
    await context.bot.send_message(
        ADMIN_CHAT_ID,
        f"๐ค {user.first_name} (@{user.username or 'ะฝะตั'}, id={user.id}) โ {action}"
    )

# โโโ ACTIONS โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
async def send_phrase(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(random.choice(PHRASES), reply_markup=reply_markup)

async def send_photo(update: Update, context: ContextTypes.DEFAULT_TYPE):
    photo = get_next_photo()
    await update.message.reply_photo(
        photo=open(os.path.join(PHOTOS_DIR, photo), "rb"),
        reply_markup=reply_markup
    )

async def start_wish(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["waiting_for_wish"] = True
    await update.message.reply_text(
        "๐ญ ะะฐะฟะธัะธ, ะฟะพะถะฐะปัะนััะฐ, ัะตะณะพ ัั ัะพัะตัั.\nะฏ ะพะฑัะทะฐัะตะปัะฝะพ ััะพ ะทะฐะฟะพะผะฝั ๐",
        reply_markup=reply_markup
    )

# โโโ HANDLERS MAP (ัะพะปัะบะพ ัััะตััะฒัััะธะต 3 ะบะฝะพะฟะบะธ) โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
BUTTONS = {
    "ะะพัะธะฒะธััััะฐั ััะฐะทะฐ ๐ธ": ("phrase", send_phrase),
    "ะะธะปะฐั ัะพัะบะฐ ๐ถ":        ("photo",  send_photo),
    "ะฏ ะถะตะปะฐัโฆ ๐ญ":           ("wish_start", start_wish),
    
# โโโ BOT LOGIC โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    await log_action(user, "start")
    await notify_admin(context, user, "start")
    await update.message.reply_text("ะัะธะฒะตั ๐\nะะฐะถะธะผะฐะน ะฝะฐ ะบะฝะพะฟะบะธ ะฒะฝะธะทั โฌ๏ธ", reply_markup=reply_markup)

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    text = update.message.text

    # ะะฑัะฐะฑะพัะบะฐ ะถะตะปะฐะฝะธั
    if context.user_data.get("waiting_for_wish"):
        context.user_data.pop("waiting_for_wish")
        save_wish(user, text)
        await log_action(user, "wish_sent")
        await context.bot.send_message(
            ADMIN_CHAT_ID,
            f"๐ญ ะะพะฒะฐั ัะพัะตะปะบะฐ ะพั {user.first_name}:\nยซ{text}ยป"
        )
        await update.message.reply_text("ะกะฟะฐัะธะฑะพ ๐ ะฏ ะทะฐะฟะพะผะฝะธะป ัะฒะพั ะถะตะปะฐะฝะธะต โจ", reply_markup=reply_markup)
        return

    # ะะฝะพะฟะบะธ
    if text in BUTTONS:
        action, handler = BUTTONS[text]
        await log_action(user, action)
        await notify_admin(context, user, action)
        await handler(update, context)
        return

    # ะะตะธะทะฒะตััะฝะพะต
    await update.message.reply_text("ะะฐะถะธะผะฐะน ะบะฝะพะฟะบะธ ะฒะฝะธะทั โฌ๏ธ", reply_markup=reply_markup)

async def wishes_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if update.effective_user.id != ADMIN_CHAT_ID:
        return
    wishes = get_all_wishes()
    if not wishes:
        await update.message.reply_text("๐ญ ะกะฟะธัะพะบ ะถะตะปะฐะฝะธะน ะฟััั")
        return
    lines = ["๐ญ ะกะฟะธัะพะบ ะถะตะปะฐะฝะธะน:\n"]
    for i, (_, wish, ts) in enumerate(wishes, 1):
        date = ts.split("T")[0]
        lines.append(f"{i}. {date} โ {wish}")
    await update.message.reply_text("\n".join(lines))

# โโโ RUN โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
app = ApplicationBuilder().token(TOKEN).build()
app.add_handler(CommandHandler("start", start))
app.add_handler(CommandHandler("wishes", wishes_command))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

if __name__ == "__main__":
    print("ะะพั ะทะฐะฟััะตะฝ")
    app.run_polling()


